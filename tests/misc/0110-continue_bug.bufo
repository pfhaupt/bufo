//! THIS IS A TEST PROGRAM
//! RUNTIME
//! SUCCESS

import "prelude.bufo";
import "libc.bufo";

// Bug: The IRGenerator did not pop loop labels from the stack after a for-loop,
//      which lead to `continue` and `break` jumping to the wrong basic blocks.

func main(argc: i32, argv: &&char) -> i32 {
    let ctr: usize = 3;
    let total: usize = 0;
    let limit: usize = 100;
    while (ctr > 0) {
        for (let i: usize = 0; i < limit; i = i + 1) {
            // continue from if-stmt jumped here
            total = total + 1;
        }
        ctr = ctr - 1;
        if (ctr == 1) {
            limit = 50;
            continue;
        }
    }
    assert(total == 250, "total is not 250");
    return 0;
}

