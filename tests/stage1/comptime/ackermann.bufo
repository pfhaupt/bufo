//! THIS IS A TEST PROGRAM
//! RUNTIME
//! SUCCESS

// REVIEW: I'd like to evaluate n=5, but the Evaluator overflows the Rust stack

import "prelude.bufo";

comptime func ack(m: usize, n: usize) -> usize {
    if (m == 0) return n + 1;
    else if (n == 0) return ack(m - 1, 1);
    return ack(m - 1, ack(m, n - 1));
}

func main(argc: i32, argv: &&char) -> i32 {
    comptime m: usize = 3;
    comptime n: usize = 2;
    comptime value: usize = ack(m, n);
    assert(value == 29);
    return 0;
}
